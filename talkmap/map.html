<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Map</title>
    <script src="org-locations.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            width: 100%;
            height: 298px;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // Replace 'YOUR_API_KEY_HERE' with your actual Google Maps API key
        (function() {
            var script = document.createElement('script');
            script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAw-G_vGLQoEFMp5gpd_Yx1CK2bx48LOro&callback=initMap';
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        })();

        function initMap() {
            // Create map centered at initial position
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 2,
                center: {lat: 30, lng: 10},
                mapTypeControl: true,
                streetViewControl: false,
                fullscreenControl: true
            });

            // Create bounds to fit all markers
            var bounds = new google.maps.LatLngBounds();

            // Add markers from org-locations.js
            var markers = [];
            for (var i = 0; i < addressPoints.length; i++) {
                var a = addressPoints[i];
                var title = a[0];
                var lat = a[1];
                var lng = a[2];

                var marker = new google.maps.Marker({
                    position: {lat: lat, lng: lng},
                    map: map,
                    title: title
                });

                // Add info window
                var infoWindow = new google.maps.InfoWindow({
                    content: '<div style="padding: 5px;"><strong>' + title + '</strong></div>'
                });

                marker.addListener('click', (function(marker, infoWindow) {
                    return function() {
                        infoWindow.open(map, marker);
                    };
                })(marker, infoWindow));

                markers.push(marker);
                bounds.extend(marker.position);
            }

            // Fit map to show all markers
            if (markers.length > 0) {
                map.fitBounds(bounds);
            }

            // Optional: Add marker clustering
            // Uncomment this if you want clustering (requires markerclusterer library)
            /*
            var markerCluster = new MarkerClusterer(map, markers, {
                imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
            });
            */
        }
    </script>
</body>
</html>